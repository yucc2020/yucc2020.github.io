<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">


  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="http://p94fw3huv.bkt.clouddn.com/static/images/favicon-48-48.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="http://p94fw3huv.bkt.clouddn.com/static/images/favicon-32-32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="http://p94fw3huv.bkt.clouddn.com/static/images/favicon-16-16.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="leetcode,medium,binary search,dynamic programming," />










<meta name="description" content="38.4%  https://leetcode.com/problems/longest-increasing-subsequence/ Given an unsorted array of integers, find the length of longest increasing subsequence. 1234For example,Given [10, 9, 2, 5, 3, 7,">
<meta name="keywords" content="leetcode,medium,binary search,dynamic programming">
<meta property="og:type" content="article">
<meta property="og:title" content="300. Longest Increasing Subsequence">
<meta property="og:url" content="http://yucc.me/p/71a6e0e6/index.html">
<meta property="og:site_name" content="Chenchen Yu">
<meta property="og:description" content="38.4%  https://leetcode.com/problems/longest-increasing-subsequence/ Given an unsorted array of integers, find the length of longest increasing subsequence. 1234For example,Given [10, 9, 2, 5, 3, 7,">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-05-22T15:42:58.871Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="300. Longest Increasing Subsequence">
<meta name="twitter:description" content="38.4%  https://leetcode.com/problems/longest-increasing-subsequence/ Given an unsorted array of integers, find the length of longest increasing subsequence. 1234For example,Given [10, 9, 2, 5, 3, 7,">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yucc.me/p/71a6e0e6/"/>





  <title>300. Longest Increasing Subsequence | Chenchen Yu</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Chenchen Yu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yucc.me/p/71a6e0e6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chenchen Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://p94fw3huv.bkt.clouddn.com/static/images/yucc.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chenchen Yu">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">300. Longest Increasing Subsequence</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-22T14:40:12+08:00">
                2018-05-22 14:40
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-05-22T23:42:58+08:00">
                2018-05-22 23:42
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  6,674
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  41
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <ul>
<li>38.4%</li>
</ul>
<p><a href="https://leetcode.com/problems/longest-increasing-subsequence/" target="_blank" rel="noopener">https://leetcode.com/problems/longest-increasing-subsequence/</a></p>
<p>Given an unsorted array of integers, find the length of longest increasing subsequence.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">For example,</span><br><span class="line">Given [10, 9, 2, 5, 3, 7, 101, 18],</span><br><span class="line">The longest increasing subsequence is [2, 3, 7, 101], therefore the length is 4. </span><br><span class="line">Note that there may be more than one LIS combination, it is only necessary for you to return the length.</span><br></pre></td></tr></table></figure>
<p>Your algorithm should run in O(n2) complexity.</p>
<p>Follow up: Could you improve it to O(n log n) time complexity?</p>
<a id="more"></a>
<hr>
<p>腾讯地图面试题</p>
<p>方法一：</p>
<p>dp算法 效率n**2</p>
<p>我的代码实现：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.empty()) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="comment">// dp[i]表示以nums[i]结尾的最长序列的个数</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(n, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i<span class="number">-1</span>; j&gt;=<span class="number">0</span>; j--)</span><br><span class="line">                <span class="keyword">if</span>(nums[i]&gt;nums[j])</span><br><span class="line">                    dp[i] = max(dp[i], dp[j]+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// dp[n-1]不是最大的，要把所有遍历才能找出来</span></span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">            res = max(dp[i], res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>动态规划，设定一个vector </p>
<p>长度为n，每一位保存的是以第i位为结尾的最长序列的长度，依次更新。</p>
<p>最后dp的vector中的最大值为结果。</p>
<p>空间效率 n，时间效率n**2</p>
<p>我的代码实现:</p>
<p>Dec 8th, 2017</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.empty()) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(n, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i<span class="number">-1</span>; j&gt;=<span class="number">0</span>; j--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i]&gt;nums[j])</span><br><span class="line">                    dp[i] = max(dp[i], dp[j]+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">            res = max(res, dp[i]);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>This is a classic problem and here is a DP solution for reference</p>
<p>Please note a NLogN solution can be found in the following link</p>
<p><a href="http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/" target="_blank" rel="noopener">Geek for Geek</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    // There&apos;s a typical DP solution with O(N^2) Time and O(N) space </span><br><span class="line">    // DP[i] means the result ends at i</span><br><span class="line">    // So for dp[i], dp[i] is max(dp[j]+1), for all j &lt; i and nums[j] &lt; nums[i]</span><br><span class="line">    int lengthOfLIS(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        const int size = nums.size();</span><br><span class="line">        if (size == 0) &#123; return 0; &#125; </span><br><span class="line">        vector&lt;int&gt; dp(size, 1);</span><br><span class="line">        int res = 1;</span><br><span class="line">        for (int i = 1; i &lt; size; ++i) &#123;</span><br><span class="line">            for (int j = 0; j &lt; i; ++j) &#123;</span><br><span class="line">                if (nums[j] &lt; nums[i]) &#123;</span><br><span class="line">                    dp[i] = max(dp[i], dp[j]+1);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res = max (res, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>我的实现</p>
<p>dp[k]定义为，以num[k]结尾的最长公共子序列的长度</p>
<p>然后初始值都设为1</p>
<p>最后要遍历一遍，才能得出res，因为每个结尾并不一样</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp(n, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;i; j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i]&gt;nums[j])</span><br><span class="line">                    dp[i] = max(dp[i], dp[j]+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;n; k++)&#123;</span><br><span class="line">            res = max(res, dp[k]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>方法二：</p>
<p>从第一种解法可以看出，最关键的是最后一位。这里保存长度为k的字符串的最后一位。</p>
<p>另一种高效解法，时间效率:nlogn</p>
<p>我的代码实现：</p>
<p>Dec 8th, 2017</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.empty()) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; dp;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> num:nums)&#123;</span><br><span class="line">            <span class="keyword">auto</span> it = lower_bound(dp.begin(), dp.end(), num);</span><br><span class="line">            <span class="keyword">if</span>(it==dp.end())</span><br><span class="line">                dp.push_back(num);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                *it = num;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>我的代码实现：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.empty())</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">size_t</span> i = <span class="number">0</span>; i&lt;nums.size(); i++)&#123;</span><br><span class="line">            <span class="keyword">auto</span> it = lower_bound(v.begin(), v.end(), nums[i]);</span><br><span class="line">            <span class="keyword">if</span>(it==v.end())</span><br><span class="line">                v.push_back(nums[i]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                *it = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> v.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>9 lines C++ code with O(NlogN) complexity</p>
<p>Inspired by <a href="http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/" target="_blank" rel="noopener">http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int lengthOfLIS(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;int&gt; res;</span><br><span class="line">        for(int i=0; i&lt;nums.size(); i++)&#123;</span><br><span class="line">            auto it = std::lower_bound(res.begin(), res.end(), nums[i]);</span><br><span class="line">            if(it==res.end()) res.push_back(nums[i]);</span><br><span class="line">            else *it = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        return res.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>关于lower_bound and upper_bound</p>
<p>lower_bound:</p>
<p>‘ &gt;= val ‘</p>
<p>Return value</p>
<p>Iterator pointing to the first element that is not less than value, or last if no such element is found.</p>
<p>upper_bound:</p>
<p>‘ &gt; val ‘</p>
<p>Return value</p>
<p>iterator pointing to the first element that is greater than value, or last if no such element is found.</p>
<p><a href="http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/" target="_blank" rel="noopener">http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/</a></p>
<p>Longest Increasing Subsequence Size (N log N)</p>
<p>Given an array of random numbers. Find longest increasing subsequence (LIS) in the array. I know many of you might have read recursive and dynamic programming (DP) solutions. There are few requests for O(N log N) algo in the forum posts.</p>
<p>Recommended: Please solve it on “PRACTICE ” first, before moving on to the solution.<br>For the time being, forget about recursive and DP solutions. Let us take small samples and extend the solution to large instances. Even though it may look complex at first time, once if we understood the logic, coding is simple.</p>
<p>Consider an input array A = {2, 5, 3}. I will extend the array during explanation.</p>
<p>By observation we know that the LIS is either {2, 3} or {2, 5}. Note that I am considering only strictly increasing sequences.</p>
<p>Let us add two more elements, say 7, 11 to the array. These elements will extend the existing sequences. Now the increasing sequences are {2, 3, 7, 11} and {2, 5, 7, 11} for the input array {2, 5, 3, 7, 11}.</p>
<p>Further, we add one more element, say 8 to the array i.e. input array becomes {2, 5, 3, 7, 11, 8}. Note that the latest element 8 is greater than smallest element of any active sequence (will discuss shortly about active sequences). How can we extend the existing sequences with 8? First of all, can 8 be part of LIS? If yes, how? If we want to add 8, it should come after 7 (by replacing 11).</p>
<p>Since the approach is offline (what we mean by offline?), we are not sure whether adding 8 will extend the series or not. Assume there is 9 in the input array, say {2, 5, 3, 7, 11, 8, 7, 9 …}. We can replace 11 with 8, as there is potentially best candidate (9) that can extend the new series {2, 3, 7, 8} or {2, 5, 7, 8}.</p>
<p>Our observation is, assume that the end element of largest sequence is E. We can add (replace) current element A[i] to the existing sequence if there is an element A[j] (j &gt; i) such that E &lt; A[i] &lt; A[j] or (E &gt; A[i] &lt; A[j] – for replace). In the above example, E = 11, A[i] = 8 and A[j] = 9.</p>
<p>In case of our original array {2, 5, 3}, note that we face same situation when we are adding 3 to increasing sequence {2, 5}. I just created two increasing sequences to make explanation simple. Instead of two sequences, 3 can replace 5 in the sequence {2, 5}.</p>
<p>I know it will be confusing, I will clear it shortly!</p>
<p>The question is, when will it be safe to add or replace an element in the existing sequence?</p>
<p>Let us consider another sample A = {2, 5, 3}. Say, the next element is 1. How can it extend the current sequences {2,3} or {2, 5}. Obviously, it can’t extend either. Yet, there is a potential that the new smallest element can be start of an LIS. To make it clear, consider the array is {2, 5, 3, 1, 2, 3, 4, 5, 6}. Making 1 as new sequence will create new sequence which is largest.</p>
<p>The observation is, when we encounter new smallest element in the array, it can be a potential candidate to start new sequence.</p>
<p>From the observations, we need to maintain lists of increasing sequences.</p>
<p>In general, we have set of active lists of varying length. We are adding an element A[i] to these lists. We scan the lists (for end elements) in decreasing order of their length. We will verify the end elements of all the lists to find a list whose end element is smaller than A[i] (floor value).</p>
<p>Our strategy determined by the following conditions,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. If A[i] is smallest among all end </span><br><span class="line">   candidates of active lists, we will start </span><br><span class="line">   new active list of length 1.</span><br><span class="line">2. If A[i] is largest among all end candidates of </span><br><span class="line">  active lists, we will clone the largest active </span><br><span class="line">  list, and extend it by A[i].</span><br><span class="line"></span><br><span class="line">3. If A[i] is in between, we will find a list with </span><br><span class="line">  largest end element that is smaller than A[i]. </span><br><span class="line">  Clone and extend this list by A[i]. We will discard all</span><br><span class="line">  other lists of same length as that of this modified list.</span><br></pre></td></tr></table></figure>
<p>Note that at any instance during our construction of active lists, the following condition is maintained.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“end element of smaller list is smaller than end elements of larger lists”.</span><br></pre></td></tr></table></figure>
<p>It will be clear with an example, let us take example from wiki {0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15}.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">A[0] = 0. Case 1. There are no active lists, create one.</span><br><span class="line">0.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[1] = 8. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 8.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[2] = 4. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 4.</span><br><span class="line">0, 8. Discarded</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[3] = 12. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 4.</span><br><span class="line">0, 4, 12.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[4] = 2. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 4. Discarded.</span><br><span class="line">0, 4, 12.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[5] = 10. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 2, 10.</span><br><span class="line">0, 4, 12. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[6] = 6. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 10. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[7] = 14. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 6, 14.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[8] = 1. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 2. Discarded.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 6, 14.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[9] = 9. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 14. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[10] = 5. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 5.</span><br><span class="line">0, 2, 6. Discarded.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[11] = 13. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 5.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 9, 13.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[12] = 3. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 1, 5. Discarded.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 9, 13.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[13] = 11. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 9, 11.</span><br><span class="line">0, 2, 6, 9, 13. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[14] = 7. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 1, 3, 7.</span><br><span class="line">0, 2, 6, 9. Discarded.</span><br><span class="line">0, 2, 6, 9, 11.</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">A[15] = 15. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 1, 3, 7.</span><br><span class="line">0, 2, 6, 9, 11.</span><br><span class="line">0, 2, 6, 9, 11, 15. &lt;-- LIS List</span><br><span class="line">----------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<p>It is required to understand above strategy to devise an algorithm. Also, ensure we have maintained the condition, “end element of smaller list is smaller than end elements of larger lists“. Try with few other examples, before reading further. It is important to understand what happening to end elements.</p>
<p>Algorithm:</p>
<p>Querying length of longest is fairly easy. Note that we are dealing with end elements only. We need not to maintain all the lists. We can store the end elements in an array. Discarding operation can be simulated with replacement, and extending a list is analogous to adding more elements to array.</p>
<p>We will use an auxiliary array to keep end elements. The maximum length of this array is that of input. In the worst case the array divided into N lists of size one (note that it does’t lead to worst case complexity). To discard an element, we will trace ceil value of A[i] in auxiliary array (again observe the end elements in your rough work), and replace ceil value with A[i]. We extend a list by adding element to auxiliary array. We also maintain a counter to keep track of auxiliary array length.</p>
<p>Bonus: You have learnt Patience Sorting technique partially 🙂</p>
<p>Here is a proverb, “Tell me and I will forget. Show me and I will remember. Involve me and I will understand.” So, pick a suit from deck of cards. Find the longest increasing sub-sequence of cards from the shuffled suit. You will never forget the approach. 🙂</p>
<p>Update – 17 July, 2016: Quite impressive reponses from the readers and few sites referring the post, feeling happy as my hardwork helping others. It looks like readers are not doing any homework prior to posting comments. Requesting to run through some examples after reading the article, and please do your work on paper (don’t use editor/compiler). The request is to help yourself. Profess to ‘know’ is different from real understanding (no disrespect). Given below was my personal experience.</p>
<p>Initial content preparation took roughly 6 hours to me. But, it was a good lesson. I finished initial code in an hour. When I start writing content to explain the reader, I realized I didn’t understand the cases. Took my note book (I have habit of maintaining binded note book to keep track of my rough work), and after few hours I filled nearly 15 pages of rough work. Whatever the content you are seeing in the gray colored example is from these pages. All the thought process for the solution triggered by a note in the book ‘Introduction to Algorithms by Udi Manber’, I strongly recommend to practice the book.</p>
<p>I suspect, many readers might not get the logic behind CeilIndex (binary search). I leave it as an exercise to the reader to understand how it works. Run through few examples on paper. I realized I have already covered the algorithm in another post.</p>
<p>Update – 5th August, 2016:</p>
<p>The following link worth referring after you do your work. I got to know the link via my recently created Disqus profile. The link has explanation of approach mentioned in the Wiki.</p>
<p><a href="http://stackoverflow.com/questions/2631726/how-to-determine-the-longest-increasing-subsequence-using-dynamic-programming" target="_blank" rel="noopener">http://stackoverflow.com/questions/2631726/how-to-determine-the-longest-increasing-subsequence-using-dynamic-programming</a></p>
<p>Given below is code to find length of LIS (updated to C++11 code, no C-style arrays),</p>
<p>C++</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Binary search (note boundaries in the caller)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">CeilIndex</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (r-l &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">int</span> m = l + (r-l)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (v[m] &gt;= key)</span><br><span class="line">        r = m;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l = m;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LongestIncreasingSubsequenceLength</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (v.size() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tail(v.size(), <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> length = <span class="number">1</span>; <span class="comment">// always points empty slot in tail</span></span><br><span class="line"> </span><br><span class="line">    tail[<span class="number">0</span>] = v[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">1</span>; i &lt; v.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (v[i] &lt; tail[<span class="number">0</span>])</span><br><span class="line">            <span class="comment">// new smallest value</span></span><br><span class="line">            tail[<span class="number">0</span>] = v[i];</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (v[i] &gt; tail[length<span class="number">-1</span>])</span><br><span class="line">            <span class="comment">// v[i] extends largest subsequence</span></span><br><span class="line">            tail[length++] = v[i];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">// v[i] will become end candidate of an existing subsequence or</span></span><br><span class="line">            <span class="comment">// Throw away larger elements in all LIS, to make room for upcoming grater elements than v[i]</span></span><br><span class="line">            <span class="comment">// (and also, v[i] would have already appeared in one of LIS, identify the location and replace it)</span></span><br><span class="line">            tail[CeilIndex(tail, <span class="number">-1</span>, length<span class="number">-1</span>, v[i])] = v[i];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v&#123; <span class="number">2</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">13</span>, <span class="number">6</span> &#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Length of Longest Increasing Subsequence is "</span> &lt;&lt; LongestIncreasingSubsequenceLength(v) &lt;&lt; <span class="string">'n'</span>;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output:</p>
<p>Length of Longest Increasing Subsequence is 6</p>
<p>Complexity:</p>
<p>The loop runs for N elements. In the worst case (what is worst case input?), we may end up querying ceil value using binary search (log i) for many A[i].</p>
<p>Therefore, T(n) &lt; O( log N! )  = O(N log N). Analyse to ensure that the upper and lower bounds are also O( N log N ). The complexity is THETA (N log N).</p>
<p>Exercises:</p>
<ol>
<li><p>Design an algorithm to construct the longest increasing list. Also, model your solution using DAGs.</p>
</li>
<li><p>Design an algorithm to construct all increasing lists of equal longest size.</p>
</li>
<li><p>Is the above algorithm an online algorithm?</p>
</li>
<li><p>Design an algorithm to construct the longest decreasing list..</p>
</li>
</ol>
<p>— Venki. Please write comments if you find anything incorrect, or you want to share more information about the topic discussed above.</p>
<hr>
<h4 id="cpp"><a href="#cpp" class="headerlink" title="cpp"></a>cpp</h4><hr>
<p><a href="https://discuss.leetcode.com/topic/28696/9-lines-c-code-with-o-nlogn-complexity" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/28696/9-lines-c-code-with-o-nlogn-complexity</a></p>
<p>3ms, September 10, 2016</p>
<p>9 lines C++ code with O(NlogN) complexity</p>
<p>Inspired by <a href="http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/" target="_blank" rel="noopener">http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int lengthOfLIS(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;int&gt; res;</span><br><span class="line">        for(int i=0; i&lt;nums.size(); i++)&#123;</span><br><span class="line">            auto it = std::lower_bound(res.begin(), res.end(), nums[i]);</span><br><span class="line">            if(it==res.end()) res.push_back(nums[i]);</span><br><span class="line">            else *it = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        return res.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="https://discuss.leetcode.com/topic/28685/c-typical-dp-n-2-solution-and-nlogn-solution-from-geekforgeek" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/28685/c-typical-dp-n-2-solution-and-nlogn-solution-from-geekforgeek</a></p>
<p>[C++] Typical DP N^2 solution and NLogN solution from GeekForGeek</p>
<p>This is a classic problem and here is a DP solution for reference</p>
<p>Please note a NLogN solution can be found in the following link</p>
<p><a href="http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/" target="_blank" rel="noopener">Geek for Geek</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    // There&apos;s a typical DP solution with O(N^2) Time and O(N) space </span><br><span class="line">    // DP[i] means the result ends at i</span><br><span class="line">    // So for dp[i], dp[i] is max(dp[j]+1), for all j &lt; i and nums[j] &lt; nums[i]</span><br><span class="line">    int lengthOfLIS(vector&lt;int&gt;&amp; nums) &#123;</span><br><span class="line">        const int size = nums.size();</span><br><span class="line">        if (size == 0) &#123; return 0; &#125; </span><br><span class="line">        vector&lt;int&gt; dp(size, 1);</span><br><span class="line">        int res = 1;</span><br><span class="line">        for (int i = 1; i &lt; size; ++i) &#123;</span><br><span class="line">            for (int j = 0; j &lt; i; ++j) &#123;</span><br><span class="line">                if (nums[j] &lt; nums[i]) &#123;</span><br><span class="line">                    dp[i] = max(dp[i], dp[j]+1);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res = max (res, dp[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/" target="_blank" rel="noopener">http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/</a></p>
<p><strong>Longest Increasing Subsequence Size (N log N)</strong></p>
<p>After few months of gap posting an algo. The current post is pending from long time, and many readers (e.g. here, here, here may be few more, I am not keeping track of all) are posting requests for explanation of the below problem.</p>
<p><strong>Given an array of random numbers. Find longest increasing subsequence (LIS) in the array. I know many of you might have read recursive and dynamic programming (DP) solutions. There are few requests for O(N log N) algo in the forum posts.</strong></p>
<p>For the time being, forget about recursive and DP solutions. Let us take small samples and extend the solution to large instances. Even though it may look complex at first time, once if we understood the logic, coding is simple.</p>
<p>Consider an input array A = {2, 5, 3}. I will extend the array during explanation.</p>
<p>By observation we know that the LIS is either {2, 3} or {2, 5}. Note that I am considering only strictly increasing sequences.</p>
<p>Let us add two more elements, say 7, 11 to the array. These elements will extend the existing sequences. Now the increasing sequences are {2, 3, 7, 11} and {2, 5, 7, 11} for the input array {2, 5, 3, 7, 11}.</p>
<p>Further, we add one more element, say 8 to the array i.e. input array becomes {2, 5, 3, 7, 11, 8}. Note that the latest element 8 is greater than smallest element of any active sequence (will discuss shortly about active sequences). How can we extend the existing sequences with 8? First of all, can 8 be part of LIS? If yes, how? If we want to add 8, it should come after 7 (by replacing 11).</p>
<p>Since the approach is offline (what we mean by offline?), we are not sure whether adding 8 will extend the series or not. Assume there is 9 in the input array, say {2, 5, 3, 7, 11, 8, 7, 9 …}. We can replace 11 with 8, as there is potentially best candidate (9) that can extend the new series {2, 3, 7, 8} or {2, 5, 7, 8}.</p>
<p>Our observation is, assume that the end element of largest sequence is E. We can add (replace) current element A[i] to the existing sequence if there is an element A[j] (j &gt; i) such that E &lt; A[i] &lt; A[j] or (E &gt; A[i] &lt; A[j] – for replace). In the above example, E = 11, A[i] = 8 and A[j] = 9.</p>
<p>In case of our original array {2, 5, 3}, note that we face same situation when we are adding 3 to increasing sequence {2, 5}. I just created two increasing sequences to make explanation simple. Instead of two sequences, 3 can replace 5 in the sequence {2, 5}.</p>
<p>I know it will be confusing, I will clear it shortly!</p>
<p>The question is, when will it be safe to add or replace an element in the existing sequence?</p>
<p>Let us consider another sample A = {2, 5, 3}. Say, the next element is 1. How can it extend the current sequences {2,3} or {2, 5}. Obviously, it can’t extend either. Yet, there is a potential that the new smallest element can be start of an LIS. To make it clear, consider the array is {2, 5, 3, 1, 2, 3, 4, 5, 6}. Making 1 as new sequence will create new sequence which is largest.</p>
<p>The observation is, when we encounter new smallest element in the array, it can be a potential candidate to start new sequence.</p>
<p>From the observations, we need to maintain lists of increasing sequences.</p>
<p>In general, we have set of active lists of varying length. We are adding an element A[i] to these lists. We scan the lists (for end elements) in decreasing order of their length. We will verify the end elements of all the lists to find a list whose end element is smaller than A[i] (floor value).</p>
<p>Our strategy determined by the following conditions,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. If A[i] is smallest among all end </span><br><span class="line">   candidates of active lists, we will start </span><br><span class="line">   new active list of length 1.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2. If A[i] is largest among all end candidates of </span><br><span class="line">  active lists, we will clone the largest active </span><br><span class="line">  list, and extend it by A[i].</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3. If A[i] is in between, we will find a list with </span><br><span class="line">  largest end element that is smaller than A[i]. </span><br><span class="line">  Clone and extend this list by A[i]. We will discard all</span><br><span class="line">  other lists of same length as that of this modified list.</span><br></pre></td></tr></table></figure>
<p>Note that at any instance during our construction of active lists, the following condition is maintained.</p>
<p>“end element of smaller list is smaller than end elements of larger lists”.</p>
<p>It will be clear with an example, let us take example from wiki {0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15}.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">A[0] = 0. Case 1. There are no active lists, create one.</span><br><span class="line">0.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[1] = 8. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 8.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[2] = 4. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 4.</span><br><span class="line">0, 8. Discarded</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[3] = 12. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 4.</span><br><span class="line">0, 4, 12.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[4] = 2. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 4. Discarded.</span><br><span class="line">0, 4, 12.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[5] = 10. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 2, 10.</span><br><span class="line">0, 4, 12. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[6] = 6. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 10. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[7] = 14. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 2.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 6, 14.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[8] = 1. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 2. Discarded.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 6, 14.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[9] = 9. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 2, 6.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 14. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[10] = 5. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 5.</span><br><span class="line">0, 2, 6. Discarded.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[11] = 13. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 5.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 9, 13.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[12] = 3. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 1, 5. Discarded.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 9, 13.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[13] = 11. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 2, 6, 9.</span><br><span class="line">0, 2, 6, 9, 11.</span><br><span class="line">0, 2, 6, 9, 13. Discarded.</span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">A[14] = 7. Case 3. Clone, extend and discard.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 1, 3, 7.</span><br><span class="line">0, 2, 6, 9. Discarded.</span><br><span class="line">0, 2, 6, 9, 11.</span><br><span class="line">----------------------------------------------------------------------------</span><br><span class="line">A[15] = 15. Case 2. Clone and extend.</span><br><span class="line">0.</span><br><span class="line">0, 1.</span><br><span class="line">0, 1, 3.</span><br><span class="line">0, 1, 3, 7.</span><br><span class="line">0, 2, 6, 9, 11.</span><br><span class="line">0, 2, 6, 9, 11, 15. &lt;-- LIS List</span><br><span class="line">----------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<p>It is required to understand above strategy to devise an algorithm. Also, ensure we have maintained the condition, “end element of smaller list is smaller than end elements of larger lists“. Try with few other examples, before reading further. It is important to understand what happening to end elements.</p>
<p>Algorithm:</p>
<p>Querying length of longest is fairly easy. Note that we are dealing with end elements only. We need not to maintain all the lists. We can store the end elements in an array. Discarding operation can be simulated with replacement, and extending a list is analogous to adding more elements to array.</p>
<p>We will use an auxiliary array to keep end elements. The maximum length of this array is that of input. In the worst case the array divided into N lists of size one (note that it does’t lead to worst case complexity). To discard an element, we will trace ceil value of A[i] in auxiliary array (again observe the end elements in your rough work), and replace ceil value with A[i]. We extend a list by adding element to auxiliary array. We also maintain a counter to keep track of auxiliary array length.</p>
<p>Bonus: You have learnt Patience Sorting technique partially 🙂</p>
<p>Here is a proverb, “Tell me and I will forget. Show me and I will remember. Involve me and I will understand.” So, pick a suit from deck of cards. Find the longest increasing sub-sequence of cards from the shuffled suit. You will never forget the approach. 🙂</p>
<p>Update – 17 July, 2016: Quite impressive reponses from the readers and few sites referring the post, feeling happy as my hardwork helping others. It looks like readers are not doing any homework prior to posting comments. Requesting to run through some examples after reading the article, and please do your work on paper (don’t use editor/compiler). The request is to help yourself. Profess to ‘know’ is different from real understanding (no disrespect). Given below was my personal experience.</p>
<p>Initial content preparation took roughly 6 hours to me. But, it was a good lesson. I finished initial code in an hour. When I start writing content to explain the reader, I realized I didn’t understand the cases. Took my note book (I have habit of maintaining binded note book to keep track of my rough work), and after few hours I filled nearly 15 pages of rough work. Whatever the content you are seeing in the gray colored example is from these pages. All the thought process for the solution triggered by a note in the book ‘Introduction to Algorithms by Udi Manber’, I strongly recommend to practice the book.</p>
<p>I suspect, many readers might not get the logic behind CeilIndex (binary search). I leave it as an exercise to the reader to understand how it works. Run through few examples on paper. I realized I have already covered the algorithm in another post.</p>
<p>Update – 5th August, 2016:</p>
<p>The following link worth referring after you do your work. I got to know the link via my recently created Disqus profile. The link has explanation of approach mentioned in the Wiki.</p>
<p><a href="http://stackoverflow.com/questions/2631726/how-to-determine-the-longest-increasing-subsequence-using-dynamic-programming" target="_blank" rel="noopener">http://stackoverflow.com/questions/2631726/how-to-determine-the-longest-increasing-subsequence-using-dynamic-programming</a></p>
<p>Given below is code to find length of LIS (updated to C++11 code, no C-style arrays),</p>
<p><strong>cpp</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"> </span><br><span class="line">// Binary search (note boundaries in the caller)</span><br><span class="line">int CeilIndex(std::vector&lt;int&gt; &amp;v, int l, int r, int key) &#123;</span><br><span class="line">    while (r-l &gt; 1) &#123;</span><br><span class="line">    int m = l + (r-l)/2;</span><br><span class="line">    if (v[m] &gt;= key)</span><br><span class="line">        r = m;</span><br><span class="line">    else</span><br><span class="line">        l = m;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    return r;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">int LongestIncreasingSubsequenceLength(std::vector&lt;int&gt; &amp;v) &#123;</span><br><span class="line">    if (v.size() == 0)</span><br><span class="line">        return 0;</span><br><span class="line"> </span><br><span class="line">    std::vector&lt;int&gt; tail(v.size(), 0);</span><br><span class="line">    int length = 1; // always points empty slot in tail</span><br><span class="line"> </span><br><span class="line">    tail[0] = v[0];</span><br><span class="line">    for (size_t i = 1; i &lt; v.size(); i++) &#123;</span><br><span class="line">        if (v[i] &lt; tail[0])</span><br><span class="line">            // new smallest value</span><br><span class="line">            tail[0] = v[i];</span><br><span class="line">        else if (v[i] &gt; tail[length-1])</span><br><span class="line">            // v[i] extends largest subsequence</span><br><span class="line">            tail[length++] = v[i];</span><br><span class="line">        else</span><br><span class="line">            // v[i] will become end candidate of an existing subsequence or</span><br><span class="line">            // Throw away larger elements in all LIS, to make room for upcoming grater elements than v[i]</span><br><span class="line">            // (and also, v[i] would have already appeared in one of LIS, identify the location and replace it)</span><br><span class="line">            tail[CeilIndex(tail, -1, length-1, v[i])] = v[i];</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    return length;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">int main() &#123;</span><br><span class="line">    std::vector&lt;int&gt; v&#123; 2, 5, 3, 7, 11, 8, 10, 13, 6 &#125;;</span><br><span class="line">    std::cout &lt;&lt; &quot;Length of Longest Increasing Subsequence is &quot; &lt;&lt; LongestIncreasingSubsequenceLength(v) &lt;&lt; &apos;\n&apos;;</span><br><span class="line">   return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">// Java program to find length of longest increasing subsequence</span><br><span class="line">// in O(n Log n) time</span><br><span class="line">import java.io.*;</span><br><span class="line">import java.util.*;</span><br><span class="line">import java.lang.Math;</span><br><span class="line"> </span><br><span class="line">class LIS</span><br><span class="line">&#123;</span><br><span class="line">    // Binary search (note boundaries in the caller)</span><br><span class="line">    // A[] is ceilIndex in the caller</span><br><span class="line">    static int CeilIndex(int A[], int l, int r, int key)</span><br><span class="line">    &#123;</span><br><span class="line">        while (r - l &gt; 1)</span><br><span class="line">        &#123;</span><br><span class="line">            int m = l + (r - l)/2;</span><br><span class="line">            if (A[m]&gt;=key)</span><br><span class="line">                r = m;</span><br><span class="line">            else</span><br><span class="line">                l = m;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    static int LongestIncreasingSubsequenceLength(int A[], int size)</span><br><span class="line">    &#123;</span><br><span class="line">        // Add boundary case, when array size is one</span><br><span class="line"> </span><br><span class="line">        int[] tailTable   = new int[size];</span><br><span class="line">        int len; // always points empty slot</span><br><span class="line"> </span><br><span class="line">        tailTable[0] = A[0];</span><br><span class="line">        len = 1;</span><br><span class="line">        for (int i = 1; i &lt; size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if (A[i] &lt; tailTable[0])</span><br><span class="line">                // new smallest value</span><br><span class="line">                tailTable[0] = A[i];</span><br><span class="line"> </span><br><span class="line">            else if (A[i] &gt; tailTable[len-1])</span><br><span class="line">                // A[i] wants to extend largest subsequence</span><br><span class="line">                tailTable[len++] = A[i];</span><br><span class="line"> </span><br><span class="line">            else</span><br><span class="line">                // A[i] wants to be current end candidate of an existing</span><br><span class="line">                // subsequence. It will replace ceil value in tailTable</span><br><span class="line">                tailTable[CeilIndex(tailTable, -1, len-1, A[i])] = A[i];</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        return len;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    // Driver program to test above function</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        int A[] = &#123; 2, 5, 3, 7, 11, 8, 10, 13, 6 &#125;;</span><br><span class="line">        int n = A.length;</span><br><span class="line">        System.out.println(&quot;Length of Longest Increasing Subsequence is &quot;+</span><br><span class="line">                            LongestIncreasingSubsequenceLength(A, n));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">/* This code is contributed by Devesh Agrawal*/</span><br></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Length of Longest Increasing Subsequence is 6</span><br></pre></td></tr></table></figure>
<p><strong>Complexity:</strong></p>
<p>The loop runs for N elements. In the worst case (what is worst case input?), we may end up querying ceil value using binary search (log i) for many A[i].</p>
<p>Therefore, T(n) &lt; O( log N! )  = O(N log N). Analyse to ensure that the upper and lower bounds are also O( N log N ). The complexity is THETA (N log N).</p>
<p><strong>Exercises:</strong></p>
<ol>
<li><p>Design an algorithm to construct the longest increasing list. Also, model your solution using DAGs.</p>
</li>
<li><p>Design an algorithm to construct all increasing lists of equal longest size.</p>
</li>
<li><p>Is the above algorithm an online algorithm?</p>
</li>
<li><p>Design an algorithm to construct the longest decreasing list..</p>
</li>
</ol>
<p>— Venki. Please write comments if you find anything incorrect, or you want to share more information about the topic discussed above.</p>
<hr>
<h4 id="python"><a href="#python" class="headerlink" title="python"></a>python</h4><hr>
<p><a href="https://discuss.leetcode.com/topic/28738/java-python-binary-search-o-nlogn-time-with-explanation" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/28738/java-python-binary-search-o-nlogn-time-with-explanation</a></p>
<p>42ms, September 10, 2016</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def lengthOfLIS(self, nums):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type nums: List[int]</span><br><span class="line">        :rtype: int</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        tails = [0] * len(nums)</span><br><span class="line">        size = 0</span><br><span class="line">        for x in nums:</span><br><span class="line">            i, j = 0, size</span><br><span class="line">            while i != j:</span><br><span class="line">                m = (i + j) / 2</span><br><span class="line">                if tails[m] &lt; x:</span><br><span class="line">                    i = m + 1</span><br><span class="line">                else:</span><br><span class="line">                    j = m</span><br><span class="line">            tails[i] = x</span><br><span class="line">            size = max(i+1, size)</span><br><span class="line">        return size</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><hr>
<p><a href="https://discuss.leetcode.com/topic/28719/short-java-solution-using-dp-o-n-log-n" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/28719/short-java-solution-using-dp-o-n-log-n</a></p>
<p>Short Java solution using DP O(n log n)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public int lengthOfLIS(int[] nums) &#123;            </span><br><span class="line">        int[] dp = new int[nums.length];</span><br><span class="line">        int len = 0;</span><br><span class="line"></span><br><span class="line">        for(int x : nums) &#123;</span><br><span class="line">            int i = Arrays.binarySearch(dp, 0, len, x);</span><br><span class="line">            if(i &lt; 0) i = -(i + 1);</span><br><span class="line">            dp[i] = x;</span><br><span class="line">            if(i == len) len++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="https://discuss.leetcode.com/topic/28738/java-python-binary-search-o-nlogn-time-with-explanation" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/28738/java-python-binary-search-o-nlogn-time-with-explanation</a></p>
<p>2ms, September 10, 2016</p>
<p>Java/Python Binary search O(nlogn) time with explanation</p>
<p>tails is an array storing the smallest tail of all increasing subsequences with length i+1 in tails[i].<br>For example, say we have nums = [4,5,6,3], then all the available increasing subsequences are:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">len = 1   :      [4], [5], [6], [3]   =&gt; tails[0] = 3</span><br><span class="line">len = 2   :      [4, 5], [5, 6]       =&gt; tails[1] = 5</span><br><span class="line">len = 3   :      [4, 5, 6]            =&gt; tails[2] = 6</span><br></pre></td></tr></table></figure>
<p>We can easily prove that tails is a increasing array. Therefore it is possible to do a binary search in tails array to find the one needs update.</p>
<p>Each time we only do one of the two:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(1) if x is larger than all tails, append it, increase the size by 1</span><br><span class="line">(2) if tails[i-1] &lt; x &lt;= tails[i], update tails[i]</span><br></pre></td></tr></table></figure>
<p>Doing so will maintain the tails invariant. The the final answer is just the size.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public int lengthOfLIS(int[] nums) &#123;</span><br><span class="line">        int[] tails = new int[nums.length];</span><br><span class="line">        int size = 0;</span><br><span class="line">        for(int x:nums)&#123;</span><br><span class="line">            int i=0, j = size;</span><br><span class="line">            while(i != j)&#123;</span><br><span class="line">                int m = (i+j) /2;</span><br><span class="line">                if(tails[m] &lt; x)</span><br><span class="line">                    i = m + 1;</span><br><span class="line">                else</span><br><span class="line">                    j = m;</span><br><span class="line">            &#125;</span><br><span class="line">            tails[i] = x;</span><br><span class="line">            if(i==size) ++size;</span><br><span class="line">        &#125;</span><br><span class="line">        return size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="https://discuss.leetcode.com/topic/30721/my-easy-to-understand-o-n-2-solution-using-dp-with-video-explanation" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/30721/my-easy-to-understand-o-n-2-solution-using-dp-with-video-explanation</a></p>
<p>My easy to understand O(n^2) solution using DP with video explanation</p>
<p>This solution is taken from this great guy -</p>
<p><a href="https://www.youtube.com/watch?v=CE2b_-XfVDk" target="_blank" rel="noopener">https://www.youtube.com/watch?v=CE2b_-XfVDk</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public int lengthOfLIS(int[] nums) </span><br><span class="line">&#123;</span><br><span class="line">	// Base case</span><br><span class="line">	if(nums.length &lt;= 1) </span><br><span class="line">		return nums.length;</span><br><span class="line"></span><br><span class="line">	// This will be our array to track longest sequence length</span><br><span class="line">	int T[] = new int[nums.length];</span><br><span class="line"></span><br><span class="line">	// Fill each position with value 1 in the array</span><br><span class="line">	for(int i=0; i &lt; nums.length; i++)</span><br><span class="line">		T[i] = 1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	// Mark one pointer at i. For each i, start from j=0.</span><br><span class="line">	for(int i=1; i &lt; nums.length; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		for(int j=0; j &lt; i; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			// It means next number contributes to increasing sequence.</span><br><span class="line">			if(nums[j] &lt; nums[i])</span><br><span class="line">			&#123;</span><br><span class="line">				// But increase the value only if it results in a larger value of the sequence than T[i]</span><br><span class="line">				// It is possible that T[i] already has larger value from some previous j&apos;th iteration</span><br><span class="line">				if(T[j] + 1 &gt; T[i])</span><br><span class="line">				&#123;</span><br><span class="line">					T[i] = T[j] + 1;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// Find the maximum length from the array that we just generated </span><br><span class="line">	int longest = 0;</span><br><span class="line">	for(int i=0; i &lt; T.length; i++)</span><br><span class="line">		longest = Math.max(longest, T[i]);</span><br><span class="line"></span><br><span class="line">	return longest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>谢谢你！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>赞赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="http://p94fw3huv.bkt.clouddn.com/static/images/wechatpay.jpg" alt="Chenchen Yu 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="http://p94fw3huv.bkt.clouddn.com/static/images/alipay.jpg" alt="Chenchen Yu 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Marco Yu
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yucc.me/p/71a6e0e6/" title="300. Longest Increasing Subsequence">http://yucc.me/p/71a6e0e6/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/leetcode/" rel="tag"># leetcode</a>
          
            <a href="/tags/medium/" rel="tag"># medium</a>
          
            <a href="/tags/binary-search/" rel="tag"># binary search</a>
          
            <a href="/tags/dynamic-programming/" rel="tag"># dynamic programming</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/p/ee81c67e/" rel="next" title="299. Bulls and Cows">
                <i class="fa fa-chevron-left"></i> 299. Bulls and Cows
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/p/c01b943b/" rel="prev" title="301. Remove Invalid Parentheses">
                301. Remove Invalid Parentheses <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://p94fw3huv.bkt.clouddn.com/static/images/yucc.jpg"
                alt="Chenchen Yu" />
            
              <p class="site-author-name" itemprop="name">Chenchen Yu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">381</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">65</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yucc2018" target="_blank" title="github">
                      
                        <i class="fa fa-fw fa-github"></i>github</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://zhuanlan.zhihu.com/yuchenchen" target="_blank" title="zhihu">
                      
                        <i class="fa fa-fw fa-globe"></i>zhihu</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/zxjhdn" target="_blank" title="weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.linkedin.com/in/chenchen-yu-510401107/" target="_blank" title="Linkedin">
                      
                        <i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/yucc2018" target="_blank" title="twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/yucc2018" target="_blank" title="facebook">
                      
                        <i class="fa fa-fw fa-facebook"></i>facebook</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:6506666@gmail.com" target="_blank" title="email">
                      
                        <i class="fa fa-fw fa-envelope"></i>email</a>
                  </span>
                
            </div>
          

          
          

          
          

          
        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#cpp"><span class="nav-text">cpp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#python"><span class="nav-text">python</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java"><span class="nav-text">java</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chenchen Yu</span>

  
</div>

<div>
<span id="showDays"></span>
</div>





<script>
  var seconds = 1000;
  var minutes = seconds * 60;
  var hours = minutes * 60;
  var days = hours * 24;
  var years = days * 365;
  var birthDay = Date.UTC(2018,04,23,12,00,00); // 这里设置建站时间
  setInterval(function() {
    var today = new Date();
    var todayYear = today.getFullYear();
    var todayMonth = today.getMonth()+1;
    var todayDate = today.getDate();
    var todayHour = today.getHours();
    var todayMinute = today.getMinutes();
    var todaySecond = today.getSeconds();
    var now = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
    var diff = now - birthDay;
    var diffYears = Math.floor(diff/years);
    var diffDays = Math.floor((diff/days)-diffYears*365);
    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      document.getElementById('showDays').innerHTML="本站已运行 "+diffYears+" 年 "+diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 ";
  }, 1000);
</script>
        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站总访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
        <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitment({
            id: window.location.pathname, 
            owner: 'yucc2018',
            repo: 'yucc2018.github.io',
            
            oauth: {
            
            
                client_secret: '704923b823cfe85343062ae2444019597f96be86',
            
                client_id: '174a67d1482f56c9aabb'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script>


  

</body>
</html>
