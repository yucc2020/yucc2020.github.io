<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">


  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-48-48.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32-32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16-16.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="leetcode,string,math," />










<meta name="description" content="https://leetcode.com/problems/valid-number/ Validate if a given string is numeric. 123456Some examples:&amp;quot;0&amp;quot; =&amp;gt; true&amp;quot; 0.1 &amp;quot; =&amp;gt; true&amp;quot;abc&amp;quot; =&amp;gt; false&amp;quot;1 a&amp;quot; =&amp;">
<meta name="keywords" content="leetcode,string,math">
<meta property="og:type" content="article">
<meta property="og:title" content="065. Valid Number">
<meta property="og:url" content="http://yucc.me/p/dad046c3/index.html">
<meta property="og:site_name" content="不踏坑的Yu同学">
<meta property="og:description" content="https://leetcode.com/problems/valid-number/ Validate if a given string is numeric. 123456Some examples:&amp;quot;0&amp;quot; =&amp;gt; true&amp;quot; 0.1 &amp;quot; =&amp;gt; true&amp;quot;abc&amp;quot; =&amp;gt; false&amp;quot;1 a&amp;quot; =&amp;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://normanyahq.github.io/static/files/valid_number_dfa.svg">
<meta property="og:updated_time" content="2018-05-22T04:07:13.167Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="065. Valid Number">
<meta name="twitter:description" content="https://leetcode.com/problems/valid-number/ Validate if a given string is numeric. 123456Some examples:&amp;quot;0&amp;quot; =&amp;gt; true&amp;quot; 0.1 &amp;quot; =&amp;gt; true&amp;quot;abc&amp;quot; =&amp;gt; false&amp;quot;1 a&amp;quot; =&amp;">
<meta name="twitter:image" content="http://normanyahq.github.io/static/files/valid_number_dfa.svg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yucc.me/p/dad046c3/"/>





  <title>065. Valid Number | 不踏坑的Yu同学</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">不踏坑的Yu同学</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-cv">
          <a href="/CV/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            CV
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yucc.me/p/dad046c3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Marco Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不踏坑的Yu同学">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">065. Valid Number</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-22T10:46:30+08:00">
                2018-05-22 10:46
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-05-22T12:07:13+08:00">
                2018-05-22 12:07
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3,280
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  21
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://leetcode.com/problems/valid-number/" target="_blank" rel="noopener">https://leetcode.com/problems/valid-number/</a></p>
<p>Validate if a given string is numeric.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Some examples:</span><br><span class="line">&quot;0&quot; =&gt; true</span><br><span class="line">&quot; 0.1 &quot; =&gt; true</span><br><span class="line">&quot;abc&quot; =&gt; false</span><br><span class="line">&quot;1 a&quot; =&gt; false</span><br><span class="line">&quot;2e10&quot; =&gt; true</span><br></pre></td></tr></table></figure>
<p>Note: It is intended for the problem statement to be ambiguous. You should gather all requirements up front before implementing one.</p>
<p>Update (2015-02-10):</p>
<p>The signature of the C++ function had been updated. If you still see your function signature accepts a const char * argument, please click the reload button  to reset your code definition.</p>
 <a id="more"></a>
<hr>
<p><a href="https://discuss.leetcode.com/topic/1095/the-worst-problem-i-have-ever-met-in-this-oj" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/1095/the-worst-problem-i-have-ever-met-in-this-oj</a></p>
<p>The worst problem i have ever met in this oj</p>
<p>The description do not give a clear explantion of the definition of a valid Number, we just use more and more trick to get the right solution. It’s too bad, it’s waste of my time</p>
<p><a href="https://discuss.leetcode.com/topic/1095/the-worst-problem-i-have-ever-met-in-this-oj/4" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/1095/the-worst-problem-i-have-ever-met-in-this-oj/4</a></p>
<p>+1 for the worst problem on OJ. This is definitely a valid interview question, but it requires heavy clarification through interaction. In a real interview, you have one and only one source to get all the missing information, a.k.a. your interviewer. On OJ, however, there is no interaction whatsoever except through trial and error. This, as far as I am concerned, is directly against the principle of ‘collecting all the info before implementing’. Internet searching also does not work since the word ‘numeric’ is not even defined in the question. No wonder this relatively easy (implementation-wise) problem has one of the lowest rates of acceptance.</p>
<p>I would suggest OJ:</p>
<ol>
<li>provide all the details to let users focus on the implementation, or</li>
<li>leave room for ambiguity but also suggest where the info can be collected, or</li>
<li>provide an interactive applet or something like that on the page so that the user can try the string combinations that they are uncertain of before implementing. I think this is an easy thing to do, and it saves everybody’s time.</li>
</ol>
<hr>
<h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><hr>
<p><a href="https://discuss.leetcode.com/topic/9490/clear-java-solution-with-ifs" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/9490/clear-java-solution-with-ifs</a></p>
<p>Clear Java solution with ifs</p>
<p>All we need is to have a couple of flags so we can process the string in linear time:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public boolean isNumber(String s) &#123;</span><br><span class="line">    s = s.trim();</span><br><span class="line">    </span><br><span class="line">    boolean pointSeen = false;</span><br><span class="line">    boolean eSeen = false;</span><br><span class="line">    boolean numberSeen = false;</span><br><span class="line">    boolean numberAfterE = true;</span><br><span class="line">    for(int i=0; i&lt;s.length(); i++) &#123;</span><br><span class="line">        if(&apos;0&apos; &lt;= s.charAt(i) &amp;&amp; s.charAt(i) &lt;= &apos;9&apos;) &#123;</span><br><span class="line">            numberSeen = true;</span><br><span class="line">            numberAfterE = true;</span><br><span class="line">        &#125; else if(s.charAt(i) == &apos;.&apos;) &#123;</span><br><span class="line">            if(eSeen || pointSeen) &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">            pointSeen = true;</span><br><span class="line">        &#125; else if(s.charAt(i) == &apos;e&apos;) &#123;</span><br><span class="line">            if(eSeen || !numberSeen) &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">            numberAfterE = false;</span><br><span class="line">            eSeen = true;</span><br><span class="line">        &#125; else if(s.charAt(i) == &apos;-&apos; || s.charAt(i) == &apos;+&apos;) &#123;</span><br><span class="line">            if(i != 0 &amp;&amp; s.charAt(i-1) != &apos;e&apos;) &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return numberSeen &amp;&amp; numberAfterE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We start with trimming.</p>
<ul>
<li>If we see [0-9] we reset the number flags.</li>
<li>We can only see . if we didn’t see e or ..</li>
<li>We can only see e if we didn’t see e but we did see a number. We reset numberAfterE flag.</li>
<li>We can only see + and - in the beginning and after an e</li>
<li>any other character break the validation.</li>
</ul>
<p>At the and it is only valid if there was at least 1 number and if we did see an e then a number after it as well.</p>
<p>So basically the number should match this regular expression:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[-+]?(([0-9]+(.[0-9]*)?)|.[0-9]+)(e[-+]?[0-9]+)?</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="https://discuss.leetcode.com/topic/8029/a-clean-design-solution-by-using-design-pattern" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/8029/a-clean-design-solution-by-using-design-pattern</a></p>
<p>A clean design solution By using design pattern</p>
<p>This problem give me a good chance to convey the importance of good design. The problem is very vogue. The point here is not how you design a algorithm, it is how you handle all cases well. There is no a clear standard for whether is a number valid, is it .50 , 39. a legal float point number? Are there only valid formats given by the example? Is hex format such as 0x12ab legal? How about if we need to add another format such as roman number like “I, II , IV” as legal format. I found all solution are just plug logic into one function, there are lots of switch case, if else in there. It is problematic, easy for bugs, difficult to add new features, and of course, in-reusable, and here I propose a design to handle this problem easily and nicely.</p>
<p>First we we can give out an interface for this problem:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface NumberValidate &#123;</span><br><span class="line"></span><br><span class="line">	boolean validate(String s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>for any string, we call validate and it return whether the given string is a valid number. Follow we can create concrete implementation for this interface, such as IntegeValidator, FloatValidator, ScienceValidator. and then using chain of responsibility design patter (from book of GOF) , chain all those validator into a list, and feed the string to each one, if there is one validator return true, then the string is a valid number.</p>
<p>The design has two advantages, one is easy to fix, for any corner cases or bug, we can locate the problem to specific validator, the effect of changing one validator will not sprint out to the all system, we call this as “encapsulation”.</p>
<p>Second is easy to extend, if we need to verify hex format or roman number format , we just need to create new validator and add to the chain, we call this advantage as “close for modification open for extension”.</p>
<p>Follow is code for the passed design:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br></pre></td><td class="code"><pre><span class="line">interface NumberValidate &#123;</span><br><span class="line"></span><br><span class="line">	boolean validate(String s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">abstract class  NumberValidateTemplate implements NumberValidate&#123;</span><br><span class="line"></span><br><span class="line">public boolean validate(String s)</span><br><span class="line">	&#123;</span><br><span class="line">		if (checkStringEmpty(s))</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		s = checkAndProcessHeader(s);</span><br><span class="line">		</span><br><span class="line">		if (s.length() == 0)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return doValidate(s);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	private boolean checkStringEmpty(String s)</span><br><span class="line">	&#123;</span><br><span class="line">		if (s.equals(&quot;&quot;))</span><br><span class="line">		&#123;</span><br><span class="line">			return true;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	private String checkAndProcessHeader(String value)</span><br><span class="line">	&#123;</span><br><span class="line">	    value = value.trim();</span><br><span class="line">	    </span><br><span class="line">		if (value.startsWith(&quot;+&quot;) || value.startsWith(&quot;-&quot;))</span><br><span class="line">		&#123;</span><br><span class="line">			value = value.substring(1);</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">		return value;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	protected abstract boolean doValidate(String s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class NumberValidator implements NumberValidate &#123;</span><br><span class="line">	</span><br><span class="line">	private ArrayList&lt;NumberValidate&gt; validators = new ArrayList&lt;NumberValidate&gt;();</span><br><span class="line">	</span><br><span class="line">	public NumberValidator()</span><br><span class="line">	&#123;</span><br><span class="line">		addValidators();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private  void addValidators()</span><br><span class="line">	&#123;</span><br><span class="line">		NumberValidate nv = new IntegerValidate();</span><br><span class="line">		validators.add(nv);</span><br><span class="line">		</span><br><span class="line">		nv = new FloatValidate();</span><br><span class="line">		validators.add(nv);</span><br><span class="line">		</span><br><span class="line">		nv = new HexValidate();</span><br><span class="line">		validators.add(nv);</span><br><span class="line">		</span><br><span class="line">		nv = new SienceFormatValidate();</span><br><span class="line">		validators.add(nv);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	@Override</span><br><span class="line">	public boolean validate(String s)</span><br><span class="line">	&#123;</span><br><span class="line">		for (NumberValidate nv : validators)</span><br><span class="line">		&#123;</span><br><span class="line">			if (nv.validate(s) == true)</span><br><span class="line">			&#123;</span><br><span class="line">				return true;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class IntegerValidate extends NumberValidateTemplate&#123;</span><br><span class="line">	</span><br><span class="line">	protected boolean doValidate(String integer)</span><br><span class="line">	&#123;</span><br><span class="line">		for (int i = 0; i &lt; integer.length(); i++)</span><br><span class="line">		&#123;</span><br><span class="line">			if(Character.isDigit(integer.charAt(i)) == false)</span><br><span class="line">			&#123;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class HexValidate extends NumberValidateTemplate&#123;</span><br><span class="line"></span><br><span class="line">	private char[] valids = new char[] &#123;&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;, &apos;f&apos;&#125;;</span><br><span class="line">	protected boolean doValidate(String hex)</span><br><span class="line">	&#123;</span><br><span class="line">		hex = hex.toLowerCase();</span><br><span class="line">		if (hex.startsWith(&quot;0x&quot;))</span><br><span class="line">		&#123;</span><br><span class="line">			hex = hex.substring(2);</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">		    return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		for (int i = 0; i &lt; hex.length(); i++)</span><br><span class="line">		&#123;</span><br><span class="line">			if (Character.isDigit(hex.charAt(i)) != true &amp;&amp; isValidChar(hex.charAt(i)) != true)</span><br><span class="line">			&#123;</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	private boolean isValidChar(char c)</span><br><span class="line">	&#123;</span><br><span class="line">		for (int i = 0; i &lt; valids.length; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			if (c == valids[i])</span><br><span class="line">			&#123;</span><br><span class="line">				return true;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class SienceFormatValidate extends NumberValidateTemplate&#123;</span><br><span class="line"></span><br><span class="line">protected boolean doValidate(String s)</span><br><span class="line">	&#123;</span><br><span class="line">		s = s.toLowerCase();</span><br><span class="line">		int pos = s.indexOf(&quot;e&quot;);</span><br><span class="line">		if (pos == -1)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		if (s.length() == 1)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		String first = s.substring(0, pos);</span><br><span class="line">		String second = s.substring(pos+1, s.length());</span><br><span class="line">		</span><br><span class="line">		if (validatePartBeforeE(first) == false || validatePartAfterE(second) == false)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	private boolean validatePartBeforeE(String first)</span><br><span class="line">	&#123;</span><br><span class="line">		if (first.equals(&quot;&quot;) == true)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		if (checkHeadAndEndForSpace(first) == false)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		NumberValidate integerValidate = new IntegerValidate();</span><br><span class="line">		NumberValidate floatValidate = new FloatValidate();</span><br><span class="line">		if (integerValidate.validate(first) == false &amp;&amp; floatValidate.validate(first) == false)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">private boolean checkHeadAndEndForSpace(String part)</span><br><span class="line">	&#123;</span><br><span class="line">		</span><br><span class="line">		if (part.startsWith(&quot; &quot;) ||</span><br><span class="line">				part.endsWith(&quot; &quot;))</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	private boolean validatePartAfterE(String second)</span><br><span class="line">	&#123;</span><br><span class="line">		if (second.equals(&quot;&quot;) == true)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		if (checkHeadAndEndForSpace(second) == false)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		NumberValidate integerValidate = new IntegerValidate();</span><br><span class="line">		if (integerValidate.validate(second) == false)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class FloatValidate extends NumberValidateTemplate&#123;</span><br><span class="line">	</span><br><span class="line">   protected boolean doValidate(String floatVal)</span><br><span class="line">	&#123;</span><br><span class="line">		int pos = floatVal.indexOf(&quot;.&quot;);</span><br><span class="line">		if (pos == -1)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		if (floatVal.length() == 1)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		NumberValidate nv = new IntegerValidate();</span><br><span class="line">		String first = floatVal.substring(0, pos);</span><br><span class="line">		String second = floatVal.substring(pos + 1, floatVal.length());</span><br><span class="line">		</span><br><span class="line">		if (checkFirstPart(first) == true &amp;&amp; checkFirstPart(second) == true)</span><br><span class="line">		&#123;</span><br><span class="line">			return true;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	private boolean checkFirstPart(String first)</span><br><span class="line">	&#123;</span><br><span class="line">	    if (first.equals(&quot;&quot;) == false &amp;&amp; checkPart(first) == false)</span><br><span class="line">	    &#123;</span><br><span class="line">	    	return false;</span><br><span class="line">	    &#125;</span><br><span class="line">	    </span><br><span class="line">	    return true;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	private boolean checkPart(String part)</span><br><span class="line">	&#123;</span><br><span class="line">	   if (Character.isDigit(part.charAt(0)) == false ||</span><br><span class="line">				Character.isDigit(part.charAt(part.length() - 1)) == false)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		NumberValidate nv = new IntegerValidate();</span><br><span class="line">		if (nv.validate(part) == false)</span><br><span class="line">		&#123;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Solution &#123;</span><br><span class="line">    public boolean isNumber(String s) &#123;</span><br><span class="line">        NumberValidate nv = new NumberValidator();</span><br><span class="line"></span><br><span class="line">	    return nv.validate(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="https://discuss.leetcode.com/topic/40983/java-logically-simple-flexible-and-clear-solution-including-rules-of-a-valid-number" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/40983/java-logically-simple-flexible-and-clear-solution-including-rules-of-a-valid-number</a></p>
<p>Java logically simple, flexible and clear solution including rules of a valid number</p>
<p>The idea is to identify the rules of a valid number first, then set boolean variables to mark key characters and judge the validity.</p>
<p>This solution is logically simple and easy to understand, and moreover, it is flexible to extend to the cases where a string of a valid number can accept any space appears anywhere, or/and the exponent can be a decimal number.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">public boolean isNumber(String s) &#123;</span><br><span class="line">		/**</span><br><span class="line">		 * isNumber(s)==true if and only if s=s1 or s1+&apos;e&apos;+s2, where s1, s2</span><br><span class="line">		 * are valid strings of a number without the char &apos;e&apos;, and s2 is an</span><br><span class="line">		 * integer.</span><br><span class="line">		 * </span><br><span class="line">		 * &apos;e&apos; : valid_count=0~1; [boolean hasE]</span><br><span class="line">		 * </span><br><span class="line">		 * Valid chars in a string of a number without &apos;e&apos;:</span><br><span class="line">		 * </span><br><span class="line">		 * &apos; &apos; : valid_count=0~n; must appear at two ends</span><br><span class="line">		 * </span><br><span class="line">		 * &apos;+/-&apos; : valid_count=0~1; must be the first non-space valid char;</span><br><span class="line">		 * [boolean hasFirst]</span><br><span class="line">		 * </span><br><span class="line">		 * &apos;.&apos; : valid_count=0~1; cannot appear after &apos;e&apos;; [boolean hasDot]</span><br><span class="line">		 * </span><br><span class="line">		 * &apos;0~9&apos; : valid_count=1~n; [boolean hasDigit]</span><br><span class="line">		 */</span><br><span class="line"></span><br><span class="line">		s = s.trim();</span><br><span class="line">		int n = s.length();</span><br><span class="line">		if (n == 0)</span><br><span class="line">			return false;</span><br><span class="line"></span><br><span class="line">		boolean hasE, hasFirst, hasDot, hasDigit;</span><br><span class="line">		hasE = hasFirst = hasDot = hasDigit = false;</span><br><span class="line"></span><br><span class="line">		char c;</span><br><span class="line">		for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">			c = s.charAt(i);</span><br><span class="line"></span><br><span class="line">			if (c &gt;= &apos;0&apos; &amp;&amp; c &lt;= &apos;9&apos;) &#123;</span><br><span class="line">				hasFirst = hasDigit = true;</span><br><span class="line">				continue;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			switch (c) &#123;</span><br><span class="line">			/*</span><br><span class="line">			 * case &apos; &apos;: continue;</span><br><span class="line">			 */ // extend to accept any space everywhere</span><br><span class="line">			case &apos;e&apos;:</span><br><span class="line">				// already has &apos;e&apos; or no digit before &apos;e&apos;</span><br><span class="line">				if (hasE || !hasDigit)</span><br><span class="line">					return false;</span><br><span class="line">				hasE = true;</span><br><span class="line"></span><br><span class="line">				// reset for the exponential number</span><br><span class="line">				hasFirst = hasDigit = false;</span><br><span class="line">				hasDot = true; // the exponent must be an integer, hence</span><br><span class="line">								// regard as if a dot exists already. Set</span><br><span class="line">								// hasDot = false extending to accept any</span><br><span class="line">								// (decimal) number as an exponent.</span><br><span class="line">				continue;</span><br><span class="line">			case &apos;+&apos;:</span><br><span class="line">			case &apos;-&apos;:</span><br><span class="line">				if (hasFirst)</span><br><span class="line">					return false;</span><br><span class="line">				hasFirst = true;</span><br><span class="line">				continue;</span><br><span class="line">			case &apos;.&apos;:</span><br><span class="line">				if (hasDot)</span><br><span class="line">					return false;</span><br><span class="line">				hasFirst = hasDot = true;</span><br><span class="line">				continue;</span><br><span class="line">			default:</span><br><span class="line">				return false;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return hasDigit;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="https://discuss.leetcode.com/topic/2973/java-solution-with-one-line" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/2973/java-solution-with-one-line</a></p>
<p>Java solution with one line</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return s.matches(&quot;(\\s*)[+-]?((\\.[0-9]+)|([0-9]+(\\.[0-9]*)?))(e[+-]?[0-9]+)?(\\s*)&quot;);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="cpp"><a href="#cpp" class="headerlink" title="cpp"></a>cpp</h4><hr>
<p><a href="https://discuss.leetcode.com/topic/2710/a-simple-solution-in-cpp" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/2710/a-simple-solution-in-cpp</a></p>
<p>A simple solution in cpp</p>
<p>The idea is pretty straightforward. A valid number is composed of the significand and the exponent (which is optional). As we go through the string, do the following things one by one:</p>
<ol>
<li>skip the leading whitespaces;</li>
<li>check if the significand is valid. To do so, simply skip the leading sign and count the number of digits and the number of points. A valid significand has no more than one point and at least one digit.</li>
<li>check if the exponent part is valid. We do this if the significand is followed by ‘e’. Simply skip the leading sign and count the number of digits. A valid exponent contain at least one digit.</li>
<li>skip the trailing whitespaces. We must reach the ending 0 if the string is a valid number.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">bool isNumber(const char *s) </span><br><span class="line">&#123;</span><br><span class="line">    int i = 0;</span><br><span class="line">    </span><br><span class="line">    // skip the whilespaces</span><br><span class="line">    for(; s[i] == &apos; &apos;; i++) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    // check the significand</span><br><span class="line">    if(s[i] == &apos;+&apos; || s[i] == &apos;-&apos;) i++; // skip the sign if exist</span><br><span class="line">    </span><br><span class="line">    int n_nm, n_pt;</span><br><span class="line">    for(n_nm=0, n_pt=0; (s[i]&lt;=&apos;9&apos; &amp;&amp; s[i]&gt;=&apos;0&apos;) || s[i]==&apos;.&apos;; i++)</span><br><span class="line">        s[i] == &apos;.&apos; ? n_pt++:n_nm++;       </span><br><span class="line">    if(n_pt&gt;1 || n_nm&lt;1) // no more than one point, at least one digit</span><br><span class="line">        return false;</span><br><span class="line">    </span><br><span class="line">    // check the exponent if exist</span><br><span class="line">    if(s[i] == &apos;e&apos;) &#123;</span><br><span class="line">        i++;</span><br><span class="line">        if(s[i] == &apos;+&apos; || s[i] == &apos;-&apos;) i++; // skip the sign</span><br><span class="line">        </span><br><span class="line">        int n_nm = 0;</span><br><span class="line">        for(; s[i]&gt;=&apos;0&apos; &amp;&amp; s[i]&lt;=&apos;9&apos;; i++, n_nm++) &#123;&#125;</span><br><span class="line">        if(n_nm&lt;1)</span><br><span class="line">            return false;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // skip the trailing whitespaces</span><br><span class="line">    for(; s[i] == &apos; &apos;; i++) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    return s[i]==0;  // must reach the ending 0 of the string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><a href="https://discuss.leetcode.com/topic/30058/a-simple-solution-in-python-based-on-dfa" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/30058/a-simple-solution-in-python-based-on-dfa</a></p>
<p>A simple solution in Python based on DFA</p>
<p>I was asked in the interview of linkedIn, writing it directly can be extremely complicated, for there are many special cases we have to deal with, and the code I wrote was messy. Then I failed to pass the interview.</p>
<p>Here’s a clear solution. With DFA we can easily get our idea into shape and then debug, and the source code is clear and simple.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">  def isNumber(self, s):</span><br><span class="line">      &quot;&quot;&quot;</span><br><span class="line">      :type s: str</span><br><span class="line">      :rtype: bool</span><br><span class="line">      &quot;&quot;&quot;</span><br><span class="line">      #define a DFA</span><br><span class="line">      state = [&#123;&#125;, </span><br><span class="line">              &#123;&apos;blank&apos;: 1, &apos;sign&apos;: 2, &apos;digit&apos;:3, &apos;.&apos;:4&#125;, </span><br><span class="line">              &#123;&apos;digit&apos;:3, &apos;.&apos;:4&#125;,</span><br><span class="line">              &#123;&apos;digit&apos;:3, &apos;.&apos;:5, &apos;e&apos;:6, &apos;blank&apos;:9&#125;,</span><br><span class="line">              &#123;&apos;digit&apos;:5&#125;,</span><br><span class="line">              &#123;&apos;digit&apos;:5, &apos;e&apos;:6, &apos;blank&apos;:9&#125;,</span><br><span class="line">              &#123;&apos;sign&apos;:7, &apos;digit&apos;:8&#125;,</span><br><span class="line">              &#123;&apos;digit&apos;:8&#125;,</span><br><span class="line">              &#123;&apos;digit&apos;:8, &apos;blank&apos;:9&#125;,</span><br><span class="line">              &#123;&apos;blank&apos;:9&#125;]</span><br><span class="line">      currentState = 1</span><br><span class="line">      for c in s:</span><br><span class="line">          if c &gt;= &apos;0&apos; and c &lt;= &apos;9&apos;:</span><br><span class="line">              c = &apos;digit&apos;</span><br><span class="line">          if c == &apos; &apos;:</span><br><span class="line">              c = &apos;blank&apos;</span><br><span class="line">          if c in [&apos;+&apos;, &apos;-&apos;]:</span><br><span class="line">              c = &apos;sign&apos;</span><br><span class="line">          if c not in state[currentState].keys():</span><br><span class="line">              return False</span><br><span class="line">          currentState = state[currentState][c]</span><br><span class="line">      if currentState not in [3,5,8,9]:</span><br><span class="line">          return False</span><br><span class="line">      return True</span><br></pre></td></tr></table></figure>
<p><img src="http://normanyahq.github.io/static/files/valid_number_dfa.svg" alt="image"></p>
<hr>
<p><a href="https://discuss.leetcode.com/topic/4219/c-my-thought-with-dfa" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/4219/c-my-thought-with-dfa</a></p>
<p>[C++] My thought with DFA</p>
<p>Code first</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    bool isNumber(string str) &#123;</span><br><span class="line">        int state=0, flag=0; // flag to judge the special case &quot;.&quot;</span><br><span class="line">        while(str[0]==&apos; &apos;)  str.erase(0,1);//delete the  prefix whitespace </span><br><span class="line">        while(str[str.length()-1]==&apos; &apos;) str.erase(str.length()-1, 1);//delete the suffix whitespace</span><br><span class="line">        for(int i=0; i&lt;str.length(); i++)&#123;</span><br><span class="line">            if(&apos;0&apos;&lt;=str[i] &amp;&amp; str[i]&lt;=&apos;9&apos;)&#123;</span><br><span class="line">                flag=1;</span><br><span class="line">                if(state&lt;=2) state=2;</span><br><span class="line">                else state=(state&lt;=5)?5:7;</span><br><span class="line">            &#125;</span><br><span class="line">            else if(&apos;+&apos;==str[i] || &apos;-&apos;==str[i])&#123;</span><br><span class="line">                if(state==0 || state==3) state++;</span><br><span class="line">                else return false;</span><br><span class="line">            &#125;</span><br><span class="line">            else if(&apos;.&apos;==str[i])&#123;</span><br><span class="line">                if(state&lt;=2) state=6;</span><br><span class="line">                else return false;</span><br><span class="line">            &#125;</span><br><span class="line">            else if(&apos;e&apos;==str[i])&#123;</span><br><span class="line">                if(flag&amp;&amp;(state==2 || state==6 || state==7)) state=3;</span><br><span class="line">                else return false;</span><br><span class="line">            &#125;</span><br><span class="line">            else return false;</span><br><span class="line">        &#125;</span><br><span class="line">        return (state==2 || state==5 || (flag&amp;&amp;state==6) || state==7);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>DFA</p>
<p>Thank @unknowcs, he came up with a brilliant provement in comments that making this a perfect DFA！</p>
<p>It’s just some states changes depend on inputs only.</p>
<p>There 8 state in my states in my DFA.<br>Below is my DFA transition diagram.</p>
<p>DFA transition diagram</p>
<p>or click picture here<br>DFA transition diagram</p>
<p>There are 5 kind of inputs in my DFA:</p>
<p>digit : number 0-9 for</p>
<p>+,- : operator + or -(negative or positive)</p>
<p>exp: e</p>
<p>dot: .</p>
<p>other: you can return false Immediately</p>
<p>4 final States in my DFA transition diagram : s2, s6, s7, s8</p>
<p>If the state change to final state at last, return true.</p>
<p>s2 can accept digits only : +1 -23432 123 and etc</p>
<p>s5 can accept exp expression: +2.4e+12 3e9 and etc</p>
<p>s6 can accept decimals end with dot: 1. -42. and etc<br>(careful, what if there exist only one dot “.”</p>
<p><strong><strong> I use a variable flag judging weather there existing numbers. cause 0. and .0 is valid and . is invalid </strong></strong><br>)</p>
<p>s7 can accept decimals: +12.23, 87., 132</p>
<p>It is clear how DFA works in my pictures. We just need to handle the inputs, and update the state according to DFA.</p>
<hr>
<p><a href="https://discuss.leetcode.com/topic/17942/c-12-ms-give-some-invalid-examples-easily-understand" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/17942/c-12-ms-give-some-invalid-examples-easily-understand</a></p>
<p>C++ 12 ms,Give some invalid examples,easily understand</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    bool isNumber(string s) &#123;</span><br><span class="line">        //&quot;1 1&quot;is not valid, &quot;0x11&quot; is not valid, &quot;.&quot; is not valid, &quot;2e3.1&quot; is not valid, &quot;2e&quot; is not valid,&quot;1a&quot; is not valid,&quot;++1&quot; is not valid</span><br><span class="line">        int n = s.size();</span><br><span class="line">        if(n == 0) return false;</span><br><span class="line">        int i = 0;</span><br><span class="line">        int count_num = 0,count_point = 0;</span><br><span class="line">        while(s[i] == &apos; &apos;) i++;</span><br><span class="line">        if(s[i] == &apos;+&apos; || s[i] == &apos;-&apos;) i++;</span><br><span class="line">        while(isdigit(s[i]) || s[i] == &apos;.&apos;) s[i++] == &apos;.&apos;?count_point++:count_num++;</span><br><span class="line">        if(count_point &gt; 1 || count_num &lt; 1) return false;</span><br><span class="line">        if(s[i] == &apos;e&apos;)&#123;</span><br><span class="line">            i++;</span><br><span class="line">            count_num = 0;count_point = 0;</span><br><span class="line">            if(s[i] == &apos;+&apos; || s[i] == &apos;-&apos;) i++;</span><br><span class="line">            while(isdigit(s[i]) || s[i] == &apos;.&apos;) s[i++] == &apos;.&apos;?count_point++:count_num++;</span><br><span class="line">            if(count_point &gt; 0 || count_num &lt; 1) return false;</span><br><span class="line">        &#125;</span><br><span class="line">        while(s[i] == &apos; &apos;) i++;</span><br><span class="line">        return i == n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="python"><a href="#python" class="headerlink" title="python"></a>python</h4><hr>
<p><a href="https://discuss.leetcode.com/topic/26746/easy-python-solution-68-ms-beats-100" target="_blank" rel="noopener">https://discuss.leetcode.com/topic/26746/easy-python-solution-68-ms-beats-100</a></p>
<p>Easy Python Solution 68 ms beats 100%</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def isNumber(self, s):</span><br><span class="line">    try: float(s)</span><br><span class="line">    except ValueError: return False</span><br><span class="line">    else: return True</span><br></pre></td></tr></table></figure>
<p>Easy Peasy :)</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>赞赏是最好的支持</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>赞赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Marco Yu 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="Marco Yu 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Marco Yu
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://yucc.me/p/dad046c3/" title="065. Valid Number">http://yucc.me/p/dad046c3/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/leetcode/" rel="tag"># leetcode</a>
          
            <a href="/tags/string/" rel="tag"># string</a>
          
            <a href="/tags/math/" rel="tag"># math</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/p/f9fa56b2/" rel="next" title="064. Minimum Path Sum">
                <i class="fa fa-chevron-left"></i> 064. Minimum Path Sum
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/p/15c6dd1/" rel="prev" title="066. Plus One">
                066. Plus One <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Marco Yu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">110</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yucc2018" target="_blank" title="github">
                      
                        <i class="fa fa-fw fa-github"></i>github</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://zhuanlan.zhihu.com/yuchenchen" target="_blank" title="zhihu">
                      
                        <i class="fa fa-fw fa-globe"></i>zhihu</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/zxjhdn" target="_blank" title="weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:6506666@gmail.com" target="_blank" title="email">
                      
                        <i class="fa fa-fw fa-envelope"></i>email</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/yucc2018" target="_blank" title="twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/yucc2018" target="_blank" title="facebook">
                      
                        <i class="fa fa-fw fa-facebook"></i>facebook</a>
                  </span>
                
            </div>
          

          
          

          
          

          
        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#java"><span class="nav-text">java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cpp"><span class="nav-text">cpp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#python"><span class="nav-text">python</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Marco Yu</span>

  
</div>

<div>
<span id="showDays"></span>
</div>





<script>
  var seconds = 1000;
  var minutes = seconds * 60;
  var hours = minutes * 60;
  var days = hours * 24;
  var years = days * 365;
  var birthDay = Date.UTC(2018,04,23,12,00,00); // 这里设置建站时间
  setInterval(function() {
    var today = new Date();
    var todayYear = today.getFullYear();
    var todayMonth = today.getMonth()+1;
    var todayDate = today.getDate();
    var todayHour = today.getHours();
    var todayMinute = today.getMinutes();
    var todaySecond = today.getSeconds();
    var now = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
    var diff = now - birthDay;
    var diffYears = Math.floor(diff/years);
    var diffDays = Math.floor((diff/days)-diffYears*365);
    var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
    var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
    var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      document.getElementById('showDays').innerHTML="本站已运行 "+diffYears+" 年 "+diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 ";
  }, 1000);
</script>
        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站总访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
        <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitment({
            id: window.location.pathname, 
            owner: 'yucc2018',
            repo: 'yucc2018.github.io',
            
            oauth: {
            
            
                client_secret: '704923b823cfe85343062ae2444019597f96be86',
            
                client_id: '174a67d1482f56c9aabb'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  


  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script>


  

</body>
</html>
